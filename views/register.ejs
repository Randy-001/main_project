<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
   
    <title>Home Authentication</title>
</head>
<body>
    <div class="container">
        <div class="row">
            
            <div class="col-sm-4">
                <form action="/register" method="POST">
                    <div class="form-group">
                        <label for="firstname">First Name</label>
                        <input type="text" class="form-control" id="firstname" name="firstname"  placeholder="First Name">
                       
                      </div>
                      <div class="form-group">
                        <label for="lastname">Last Name</label>
                        <input type="text" class="form-control" id="lastname" name="lastname" placeholder="Last Name">
                       
                      </div>
                      <div class="form-group">
                        <label for="username">User Name</label>
                        <input type="text" class="form-control" id="username" name="username" placeholder="Username">
                       
                      </div>
                     
                        <div class="form-group">
                            <label for="password">Password</label>
                            <input type="password" class="form-control" id="password" name="password" placeholder="Password">
                        
                      </div>
                      <div class="form-group">
                            <label for="phonenumber">Phonenumber</label>
                            <input type="text" class="form-control" id="phonenumber" name="phonenumber">
                            
                      </div>
                      <div id="otpauth">
                        <button type="button" onclick="otpfunc()" class="btn btn-primary btn-lg btn-block">Get OTP</button><br>
                        <input type="text" id="otp"  class="form-control"><br>
                        <button type="button" onclick="checkfunction()" class="btn btn-primary btn-lg btn-block">Submit</button>
                      </div>
                    
                     
                      <div id="auth" hidden>
                        <div class="form-group">
                          <label for="email">E-Mail</label>
                          <input type="email" class="form-control" name="email" id="email" >
                  
                        </div>
                        <div class="form-group" id="geolocation">
                          
                          <button type="button" class="btn btn-primary btn-lg btn-block">Add Geolocation</button><br>
                          <input type="text" id="sentlocation" name="geolocation" class="form-control" name="email" readonly >
                        </div>
                        <div class="form-group">
                          <select id="sq" name="secqn" class="form-control">
                              <option value="What city were you born in?">What city were you born in?</option>
                              <option value="What is your oldest sibling's middle name?" >What is your oldest sibling's middle name?</option>
                              <option value="What was the first concert you attended?" >What was the first concert you attended?</option>
                              <option value="What was the make and model of your first car?">What was the make and model of your first car?</option>
                              <option value="In what city or town did your parents meet?" >In what city or town did your parents meet?</option>
      
                            </select>
                            <br>
                            <input type="text" id="sqans" name="secqnvalue" class="form-control">
                            
                        </div>
                        <div class="form-group">
                          <select  name="secqn1" class="form-control">
                              <option id="one" value="What city were you born in?">What city were you born in?</option>
                              <option id="two" value="What is your oldest sibling's middle name?" >What is your oldest sibling's middle name?</option>
                              <option id="three" value="What was the first concert you attended?" >What was the first concert you attended?</option>
                              <option id="four" value="What was the make and model of your first car?">What was the make and model of your first car?</option>
                              <option id="five" value="In what city or town did your parents meet?" >In what city or town did your parents meet?</option>
      
                            </select>
                            <br>
                            <input type="text" name="secqnvalue1" class="form-control">
                            
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg btn-block">Submit</button>

                      </div>
                     
                     
                        
                        
                  
                      
                    
                  </form>
    
            </div>
          

        </div>
       
        

    </div>
   
</body>
<script>
const l=document.getElementById("geolocation")
    console.log(l)
    l.addEventListener('click',(e)=>{
        navigator.geolocation.getCurrentPosition(position => {
                        const { latitude, longitude } = position.coords;
                        const g=document.getElementById("sentlocation")
                        g.value=latitude+","+longitude
                        console.log(latitude,longitude)
                      });
       })
       document.getElementById("sqans").addEventListener('click',(e)=>{
        var sec=document.getElementById("sq").value
        let one=document.getElementById("one")
        let two=document.getElementById("two")
        let three =document.getElementById("three")
        let four=document.getElementById("four")
        let five=document.getElementById("five")
        if(sec === one.value){
          one.hidden=true
          two.hidden=false
          three.hidden=false
          four.hidden=false
          five.hidden=false
        }
        else if(sec === two.value){
          one.hidden=false
          two.hidden=true
          three.hidden=false
          four.hidden=false
          five.hidden=false
        }
        else if(sec === three.value){
          one.hidden=false
          two.hidden=false
          three.hidden=true
          four.hidden=false
          five.hidden=false
        }
        else if(sec === four.value){
          one.hidden=false
          two.hidden=false
          three.hidden=false
          four.hidden=true
          five.hidden=false
        }
        else{
          one.hidden=false
          two.hidden=false
          three.hidden=false
          four.hidden=false
          five.hidden=true
        }
       })
       var OTP;
function otpfunc(){
  let options = {
            method: 'POST',
            headers: {
                'Content-Type':
                    'application/json;charset=utf-8'
            },
            body: JSON.stringify({phonenumber:document.getElementById("phonenumber").value})
        }
  let fetchRes = fetch("/otpfunction",options);
        fetchRes.then(res =>
            res.json())
            .then(d => {
              console.log(d)
                OTP=d.otp
            })
}
function checkfunction(){
  if(document.getElementById("otp").value===OTP)
  {
    document.getElementById("otpauth").hidden=true
    document.getElementById("auth").hidden=false
  }
}

       

       </script>
</html>